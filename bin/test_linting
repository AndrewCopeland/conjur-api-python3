#!/bin/bash -e

SRC_DIRS=( "./conjur_api_python3"
           "./pkg_bin" )

# W0511: TODOs
# E0401: Import error - these are not accurate currently
DISABLED_ERRORS="W0511,E0401"

echo "Building API container..."
docker-compose build

for src_dir in "${SRC_DIRS[@]}"; do
  echo "Checking linting in $src_dir..."
  set -x
  docker-compose run --rm \
    --no-deps \
    test \
    pylint -r n -f parseable --disable="$DISABLED_ERRORS" "$src_dir"
done

echo "Linting completed!"
